# specify the location of the theme file
baseurl: "kgen1.kennedy.ox.ac.uk"
title: "Pipeline integration report"

# report
report:
  def:
    title: "pipeline_integration.py report"
    contents: >-
      This report was generated by pipeline_integration.py
      from the dropflow repository (https://github.com/sansomlab/dropflow)

  # Create the sections for the different integration methods
  integration_section:
    def:
      source: "."
      target: "integration"
      title: "Per tool integration reports"
      contents: >-
        Per-integration tool reports

    integration_tool_section:
      def:
        source: "*.integrated.dir"
        target: "."
        title: "Per integration tool reports"
        contents: >-
          Per-integration method reports.
        pages: None

          # Create the per parameter combination subsections
      parameterised_reports:
        def:
          source: "*.run.dir"
          target: "."
          title: "integration report"
          contents: ""

            # QC section pages
          pages:
            highly_variable_genes: integration_normalise_hvg.html
            integration_report: integration_run_harmony.html
            umap: general_plot_umap.html
            seurat_metrics: assess.integration.dir/integration_assess_seurat_metrics.html
            kBET: assess.integration.dir/integration_run_kbet.html
            iLISI: assess.integration.dir/integration_run_lisi.html

        seurat_analysis:
          def:
            source: "."
            target: "seurat_downstream"
            title: "seurat clustering analysis"
            contents: ""
            pages: None

          seurat_runs:
            def:
              source: "*.seurat.dir"
              target: "."
              title: "seurat"
              contents: ""
              pages:
                clustering: cluster.dir/general_seurat_cluster.html
                umap: plots.umap.dir/general_plot_umap.html
                entropy: plots.entropy.dir/integration_run_entropy.html

  summary_report:
    def:
      source: "summary.plots.dir"
      target: "summary"
      title: "Seurat metrics summary"
      contents: >-
          Summary plots of the seurat metrics.

      # QC section pages
      pages:
        seurat_metrics: integration_summarise_seurat_metrics.html
        iLISI: integration_summarise_lisi.html
        entropy: integration_summarise_entropy.html
        alluvial_plots: integration_plot_alluvial_comparison_tools.html
